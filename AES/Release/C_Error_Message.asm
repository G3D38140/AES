; Listing generated by Microsoft (R) Optimizing Compiler Version 19.23.28106.4 

	TITLE	i:\projets\aes\aes\aes\c_error_message.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB OLDNAMES

EXTRN	__imp__MessageBoxW@16:PROC
PUBLIC	?MyHandleError@C_Error_Message@@QAEXPA_WH@Z	; C_Error_Message::MyHandleError
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z$0
__ehfuncinfo$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
; Function compile flags: /Ogtp
; File I:\Projets\AES\AES\AES\C_Error_Message.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\afxstr.h
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\atlsimpstr.h
; File I:\Projets\AES\AES\AES\C_Error_Message.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\atlsimpstr.h
; File I:\Projets\AES\AES\AES\C_Error_Message.cpp
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\atlsimpstr.h
; File I:\Projets\AES\AES\AES\C_Error_Message.cpp
;	COMDAT ?MyHandleError@C_Error_Message@@QAEXPA_WH@Z
_TEXT	SEGMENT
_COMP$ = -20						; size = 4
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
_psz$ = 8						; size = 4
_nErrorNumber$ = 12					; size = 4
?MyHandleError@C_Error_Message@@QAEXPA_WH@Z PROC	; C_Error_Message::MyHandleError, COMDAT
; _this$ = ecx

; 14   : {

	push	ebp
	mov	ebp, esp
	push	-1
	push	__ehhandler$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z
	mov	eax, DWORD PTR fs:0
	push	eax
	sub	esp, 8
	mov	eax, DWORD PTR ___security_cookie
	xor	eax, ebp
	mov	DWORD PTR __$ArrayPad$[ebp], eax
	push	esi
	push	edi
	push	eax
	lea	eax, DWORD PTR __$EHRec$[ebp]
	mov	DWORD PTR fs:0, eax
	mov	esi, ecx
	mov	edi, DWORD PTR _psz$[ebp]
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\afxstr.h

; 52   : 		return( AfxGetStringManager() );

	call	?AfxGetStringManager@@YGPAUIAtlStringMgr@ATL@@XZ ; AfxGetStringManager
	mov	ecx, eax
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\atlsimpstr.h

; 205  : 		ATLENSURE( pStringMgr != NULL );

	test	ecx, ecx
	je	$LN43@MyHandleEr

; 206  : 		CStringData* pData = pStringMgr->GetNilString();

	mov	eax, DWORD PTR [ecx]
	call	DWORD PTR [eax+12]

; 59   : 		return (this+1);

	add	eax, 16					; 00000010H

; 780  : 		m_pszData = static_cast< PXSTR >( pData->data() );

	mov	DWORD PTR _COMP$[ebp], eax
; File I:\Projets\AES\AES\AES\C_Error_Message.cpp

; 16   : 	BOOL status = Mess.LoadString(IDS_STRING194);

	push	194					; 000000c2H
	mov	ecx, esi
	mov	DWORD PTR __$EHRec$[ebp+8], 0
	call	?LoadStringW@?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@QAEHI@Z ; ATL::CStringT<wchar_t,StrTraitMFC<wchar_t,ATL::ChTraitsCRT<wchar_t> > >::LoadStringW

; 17   : 	COMP.Format(Mess, psz, nErrorNumber);

	push	DWORD PTR _nErrorNumber$[ebp]
	lea	eax, DWORD PTR _COMP$[ebp]
	push	edi
	push	DWORD PTR [esi]
	push	eax
	call	?Format@?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@QAAXPB_WZZ ; ATL::CStringT<wchar_t,StrTraitMFC<wchar_t,ATL::ChTraitsCRT<wchar_t> > >::Format
	add	esp, 16					; 00000010H

; 18   : 	status = Mess.LoadString(IDS_STRING195);

	mov	ecx, esi
	push	195					; 000000c3H
	call	?LoadStringW@?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@QAEHI@Z ; ATL::CStringT<wchar_t,StrTraitMFC<wchar_t,ATL::ChTraitsCRT<wchar_t> > >::LoadStringW

; 19   : 	MessageBox(NULL, COMP, Mess, MB_OK);

	push	0
	push	DWORD PTR [esi]
	mov	esi, DWORD PTR _COMP$[ebp]
	push	esi
	push	0
	call	DWORD PTR __imp__MessageBoxW@16

; 20   : }

	mov	DWORD PTR __$EHRec$[ebp+8], -1
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\atlsimpstr.h

; 800  : 		return( reinterpret_cast< CStringData* >( m_pszData )-1 );

	add	esi, -16				; fffffff0H

; 88   : 		if( _InterlockedDecrement( &nRefs ) <= 0 )

	or	eax, -1
	lock	 xadd	 DWORD PTR [esi+12], eax
	dec	eax
	test	eax, eax
	jg	SHORT $LN38@MyHandleEr

; 89   : 		{
; 90   : 			pStringMgr->Free( this );

	mov	ecx, DWORD PTR [esi]
	push	esi
	mov	eax, DWORD PTR [ecx]
	call	DWORD PTR [eax+4]
$LN38@MyHandleEr:
; File I:\Projets\AES\AES\AES\C_Error_Message.cpp

; 20   : }

	mov	ecx, DWORD PTR __$EHRec$[ebp]
	mov	DWORD PTR fs:0, ecx
	pop	ecx
	pop	edi
	pop	esi
	mov	ecx, DWORD PTR __$ArrayPad$[ebp]
	xor	ecx, ebp
	call	@__security_check_cookie@4
	mov	esp, ebp
	pop	ebp
	ret	8
$LN43@MyHandleEr:
; File C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.23.28105\atlmfc\include\atlsimpstr.h

; 205  : 		ATLENSURE( pStringMgr != NULL );

	push	-2147467259				; 80004005H
	call	?AtlThrowImpl@ATL@@YGXJ@Z		; ATL::AtlThrowImpl
$LN41@MyHandleEr:
	int	3
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z$0:
	lea	ecx, DWORD PTR _COMP$[ebp]
	jmp	??1?$CStringT@_WV?$StrTraitMFC@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@QAE@XZ ; ATL::CStringT<wchar_t,StrTraitMFC<wchar_t,ATL::ChTraitsCRT<wchar_t> > >::~CStringT<wchar_t,StrTraitMFC<wchar_t,ATL::ChTraitsCRT<wchar_t> > >
__ehhandler$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z:
	mov	edx, DWORD PTR [esp+8]
	lea	eax, DWORD PTR [edx+12]
	mov	ecx, DWORD PTR [edx-20]
	xor	ecx, eax
	call	@__security_check_cookie@4
	mov	ecx, DWORD PTR [edx-4]
	xor	ecx, eax
	call	@__security_check_cookie@4
	mov	eax, OFFSET __ehfuncinfo$?MyHandleError@C_Error_Message@@QAEXPA_WH@Z
	jmp	___CxxFrameHandler3
text$x	ENDS
?MyHandleError@C_Error_Message@@QAEXPA_WH@Z ENDP	; C_Error_Message::MyHandleError
END
